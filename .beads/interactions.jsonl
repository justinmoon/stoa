{"id":"stoa-0ty","title":"Port CodeMirror demo to stoa-style WebView app","description":"## Goal\n\nTurn the standalone CodeMirror demo (`editor-demos/codemirror/`) into a proper Stoa pane that runs in a WebView, communicating with the Swift host via a message-passing protocol.\n\n## What We Have\n\nThe standalone demo (`./cm \u003cfile\u003e`) is:\n- Node + Vite dev server\n- CodeMirror 6 with syntax highlighting for ~10 languages\n- Simple `/api/file` and `/api/save` HTTP endpoints\n- Saves on Cmd+S\n\n## What We Want\n\nA `PaneContent.codemirror(path: String)` pane type that:\n1. Loads CodeMirror in a WKWebView\n2. Opens the specified file\n3. Communicates file operations via `WKScriptMessageHandler` (not HTTP)\n4. Integrates with Stoa's focus/blur system\n5. Respects Stoa's keybinding interception for splits, pane navigation, etc.\n\n## Implementation Steps\n\n### 1. Static Bundle\n- Build CodeMirror to a static bundle (no dev server needed)\n- Output: `editor-demos/codemirror/dist/cm-bundle.js` + `index.html`\n- Bundle includes all language modes\n\n### 2. Swift Host Bridge\nCreate `CMEditorApp.swift`:\n```swift\nclass CMEditorApp: StoaApp {\n    private let webView: WKWebView\n    private let filePath: String\n    \n    // Message handlers for:\n    // - loadFile(path) -\u003e returns file contents\n    // - saveFile(path, content) -\u003e writes to disk\n    // - ready() -\u003e editor initialized\n    // - modified(bool) -\u003e dirty state changed\n}\n```\n\n### 3. JS Bridge API\nAdd to CodeMirror bundle:\n```javascript\nwindow.stoa = {\n    // Called by Swift to load file\n    loadFile(path, contents) { ... },\n    \n    // Called by Swift to get current contents\n    getContents() { return view.state.doc.toString(); },\n    \n    // Called by Swift to focus/blur\n    focus() { view.focus(); },\n    blur() { view.contentDOM.blur(); },\n};\n\n// Call Swift for file operations\nwindow.webkit.messageHandlers.stoa.postMessage({\n    type: 'save',\n    path: currentPath,\n    contents: view.state.doc.toString()\n});\n```\n\n### 4. Pane Integration\nAdd to `Pane.swift`:\n```swift\ncase .codemirror(let path):\n    return CMEditorApp(path: path, config: config)\n```\n\n## Success Criteria\n\n- [ ] `Cmd+E` (or similar) opens CodeMirror pane\n- [ ] Can edit a file, save with Cmd+S\n- [ ] Modified indicator in title bar\n- [ ] Focus switches cleanly between terminal and editor panes\n- [ ] Stoa keybindings (split, close pane) work while editor is focused\n\n## Non-Goals (for now)\n\n- LSP integration (separate bead)\n- Multiple file tabs (just one file per pane)\n- File picker (path is passed in)\n\n## Dependencies\n\n- Bead 1 (stoa-app-protocol) should be done first for clean integration\n- Or can be done in parallel if we use the existing WebView patterns","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T20:05:49.328264-08:00","updated_at":"2025-12-21T20:05:49.328264-08:00"}
{"id":"stoa-425","title":"App should open in fullscreen by default","description":"Launch the app in fullscreen mode automatically.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-21T15:14:16.155441-08:00","updated_at":"2025-12-21T15:14:16.155441-08:00"}
{"id":"stoa-44l","title":"Build Zig GUI editor (Mach + Flow)","description":"## Goal\n\nBuild a minimal, fast, GPU-accelerated code editor in Zig by combining:\n- **Mach Engine** - Windowing, input, WebGPU rendering\n- **Flow's Buffer** - Rope data structure, cursor/selection, undo/redo\n\nSee full plan: `docs/plan-zig-editor.md`\n\n## Why This Path?\n\n- Flow's buffer code is clean, battle-tested (~2,500 lines we can reuse)\n- Mach provides modern GPU rendering without the NSApplication problems of GPUI\n- Zig builds in ~5 seconds vs ~60 seconds for Rust\n- Smaller binary (~5MB vs ~20MB)\n\n## Key Components\n\n### From Flow (reuse directly)\n- `Buffer.zig` - Hybrid rope/piece-table\n- `Cursor.zig` - Cursor movement\n- `Selection.zig` - Selection handling\n- `View.zig` - Viewport scrolling\n- `flow-syntax` - Tree-sitter integration\n\n### We Build on Mach\n- `TextRenderer.zig` - GPU text rendering pipeline\n- `GlyphAtlas.zig` - Font atlas generation\n- `EditorModule.zig` - Main editor logic as Mach module\n\n## Phases\n\n1. Window + basic text rendering (3-4 days)\n2. Flow buffer integration (3-4 days)\n3. Viewport + scrolling (2-3 days)\n4. Syntax highlighting (2-3 days)\n5. Selection + clipboard (2-3 days)\n6. Undo/redo (1-2 days)\n7. File operations (1-2 days)\n8. Vim mode (2-3 days)\n\n**Total: ~3-4 weeks to usable editor**\n\n## Success Criteria\n\n- [ ] Opens file, displays with syntax highlighting\n- [ ] Vim-style normal/insert modes\n- [ ] Basic editing, undo/redo\n- [ ] Save file\n- [ ] 60 FPS on 10k line file\n\n## Dependencies\n\nNone - this is an alternative path to the GPUI approach.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T20:25:42.475342-08:00","updated_at":"2025-12-21T20:25:42.475342-08:00"}
{"id":"stoa-4nr","title":"App should open in fullscreen by default","description":"Launch the app in fullscreen mode automatically.","status":"tombstone","priority":1,"issue_type":"feature","created_at":"2025-12-21T15:13:47.408892-08:00","updated_at":"2025-12-21T15:14:43.86707-08:00","deleted_at":"2025-12-21T15:14:43.86707-08:00","deleted_by":"daemon","delete_reason":"delete","original_type":"feature"}
{"id":"stoa-5bv","title":"Add tmux-style windows/workspaces","description":"Add the ability to have multiple windows (like tmux windows) that each contain their own split tree. Keybinds to switch between windows, create new ones, close them. Needs design work first to figure out the right UX and data model.","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2025-12-21T15:08:24.687472-08:00","updated_at":"2025-12-21T15:13:53.887303-08:00","deleted_at":"2025-12-21T15:13:53.887303-08:00","deleted_by":"daemon","delete_reason":"delete","original_type":"epic"}
{"id":"stoa-8cc","title":"Install Stoa on this machine","description":"Figure out how to install the built app so it can be launched from Spotlight/dock rather than just run.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-21T15:14:27.923051-08:00","updated_at":"2025-12-21T15:14:27.923051-08:00"}
{"id":"stoa-cvc","title":"Fix focus border on rounded window corners","description":"The blue focus border extends outside rounded window corners when not fullscreen. Need to clip or adjust the border to respect window shape.","status":"open","priority":2,"issue_type":"bug","created_at":"2025-12-21T15:14:06.203506-08:00","updated_at":"2025-12-21T15:14:06.203506-08:00"}
{"id":"stoa-dcu","title":"Spec out windows/workspaces feature","description":"Design tmux-style windows. Questions: What is a window? Keybindings? Tab bar or status line? Data model? Look at tmux, i3, Ghostty for inspiration.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T15:14:00.556714-08:00","updated_at":"2025-12-21T15:14:00.556714-08:00"}
{"id":"stoa-dd0","title":"Create app icon and show in dock","description":"Design an app icon for Stoa and configure the build so it shows up in the dock when running.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T15:14:21.262091-08:00","updated_at":"2025-12-21T15:14:21.262091-08:00"}
{"id":"stoa-g3c","title":"Design tmux-style windows UX and data model","description":"Design questions to answer:\n- What is a \"window\"? A named split tree? \n- How do windows relate to macOS windows vs internal workspaces?\n- Keybindings: Cmd+1/2/3 to switch? Cmd+T for new?\n- Should windows have names? How to display them (tab bar, status line)?\n- Data model: Array of SplitTrees? Window struct wrapping SplitTree?\n- Persistence: Save/restore window state?\n\nLook at tmux, i3, and Ghostty for inspiration.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-21T15:08:33.327796-08:00","updated_at":"2025-12-21T15:13:53.887692-08:00","dependencies":[{"issue_id":"stoa-g3c","depends_on_id":"stoa-5bv","type":"parent-child","created_at":"2025-12-21T15:08:39.084699-08:00","created_by":"daemon"}],"deleted_at":"2025-12-21T15:13:53.887692-08:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"stoa-k7g","title":"Add session persistence/restore","description":"Save window state (split tree, pane types, URLs) on quit and restore on launch. Allow naming sessions.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-21T15:14:11.159277-08:00","updated_at":"2025-12-21T15:14:11.159277-08:00"}
{"id":"stoa-khl","title":"Create app icon and show in dock","description":"Design an app icon for Stoa and configure the build so it shows up in the dock when running.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-21T15:13:47.547305-08:00","updated_at":"2025-12-21T15:14:43.867848-08:00","deleted_at":"2025-12-21T15:14:43.867848-08:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"stoa-nng","title":"Spec out windows/workspaces feature","description":"Design tmux-style windows. Questions: What is a window? Keybindings? Tab bar or status line? Data model? Look at tmux, i3, Ghostty for inspiration.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-21T15:13:47.008117-08:00","updated_at":"2025-12-21T15:14:43.868807-08:00","deleted_at":"2025-12-21T15:14:43.868807-08:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"stoa-ohh","title":"Redesign new pane creation flow","description":"Current: Cmd+backslash/minus for terminal splits, Cmd+Shift+W for webview. Options to consider:\n1. Picker menu on new pane (choose type)\n2. i3-style: separate commands for tiling mode + dmenu-style launcher\n3. Always open terminal, then convert pane type with keybind\nNeed to decide on the best UX.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T15:14:33.201472-08:00","updated_at":"2025-12-21T15:14:33.201472-08:00"}
